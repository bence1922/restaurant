openapi: 3.0.3
info:
  title: Swagger Restaurant
  description: |-
    This is a sample Restaruant
  version: 1.0.1
externalDocs:
  description: Find out more about this program on github.
  url: https://github.com/bence1922/restaurant
servers:
  - url: http://localhost:8080/api
tags:
  - name: auth
  - name: user
  - name: employee
  - name: customer
  - name: table
  - name: booking
  - name: menu

paths:
  /auth/login:
    post:
      tags: 
        - auth
      summary: User login
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLogin'
      responses:
        '201':
          description: User session succesfully created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserSession'
        '400':
          description: Bad request
        '500':
          description: Internal server error
  /auth/logout:
    get:
      tags:
        - auth
      summary: Logs out current logged in user
      description: ''
      operationId: logout
      security:
        - sessionId: []
      responses:
        '204':
          description: Successful operation
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /auth/password-reset:
    patch:
      tags: 
        - auth
      summary: Password reset
      operationId: passwordReset
      security:
        - sessionId: []
      parameters:
        - name: userId
          in: header
          description: The ID of the user
          required: true
          schema:
            type: string
            example: "6544cd596955fe0a1c04fba9"
        - name: oldPassword
          in: header
          schema: { type: string }
          required: true
        - name: newPassword
          in: header
          schema: { type: string }
          required: true
      responses:
        '204':
          description: Successful operation
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /user/{userId}:
    parameters:
      - name: userId
        in: path
        description: The ID of the user
        required: true
        schema:
          type: string
          example: "6544cd596955fe0a1c04fba9"
    get:
      tags:
        - user
      summary: Get user by ID
      operationId: getUserById
      security:
      - sessionId: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    put:
      tags:
        - user
      summary: Update user by ID
      operationId: updateUserById
      security:
      - sessionId: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      tags:
        - user
      summary: Delete user by ID
      operationId: deleteUserById
      security:
      - sessionId: []
      responses:
        '204':
          description: Successfully deleted
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error

  /employee:
    get:
      tags:
        - employee
      summary: Get all employees
      operationId: getEmployees
      security:
      - sessionId: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'          
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      tags:
        - employee
      summary: Register an employee
      operationId: registerEmployee
      security:
      - sessionId: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegister'
        required: true
      responses:
        '201':
          description: Employee succesfully registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '409':
          description: User with this name already exists
        '500':
          description: Internal server error

  /customer:
    get:
      tags: 
        - customer
      summary: Get all customers
      operationId: listCustomers
      security:
      - sessionId: []
      responses:
        '200':
          description: A list of customers
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    post:
      tags: 
        - customer
      summary: Customer registration
      operationId: registerCustomer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegister'
      responses:
        '200':
          description: Customer succesfully registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Bad request
        '409':
          description: User with this name already exists
        '500':
          description: Internal server error
  /customer/order:
    get:
      tags:
        - customer
      summary: Query customer orders
      operationId: queryCustomerOrders
      security:
      - sessionId: []
      parameters:
        - name: customer-name
          in: header
          schema: { type: string }
          required: false
        - name: is-current
          in: header
          schema: { type: boolean }
          required: false
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CustomerOrder'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /customer/points/{userId}:
    parameters:
      - name: userId
        in: path
        schema: { type: string }
        required: true
    get:
      tags:
        - customer
      summary: Query point for customer
      operationId: queryPointsForCustomer
      security:
      - sessionId: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: integer
                example: 1342
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error

  /customer/order/{userId}:
    parameters:
      - name: userId
        in: path
        schema: { type: string }
        required: true
    get:
      tags:
        - customer
      summary: Query orders for customer
      operationId: queryOrdersForCustomer
      security:
      - sessionId: []
      parameters:
        - name: is-current
          in: header
          schema: { type: boolean }
          required: false
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CustomerOrder'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    post:
      tags:
        - customer
      summary: Place an order
      operationId: placeCustomerOrder
      security:
      - sessionId: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Order'
      responses:
        '201':
          description: Order placed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /customer/order/{userId}/{customerOrderId}:
    parameters:
      - name: customerOrderId
        in: path
        description: ID of the order to update
        required: true
        schema:
          type: string
          example: "6544cd596955fe0a1c04fba9"
      - name: userId
        in: path
        description: The ID of the user
        required: true
        schema:
          type: string
          example: "6544cd596955fe0a1c04fba9"
    patch:
      tags:
        - customer
      summary: Update an order status or rating
      operationId: updateCustomerOrder
      security:
      - sessionId: []
      parameters:
        - name: rating
          in: header
          schema:
            type: integer
            format: int32
          required: false
        - name: status
          in: header
          schema:
            type: string
            enum:
              - placed
              - cooking
              - delivering
              - delivered
          required: false
      responses:
        '200':
          description: Order rated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /customer/order/{userId}/{customerOrderId}/invoice:
    parameters:
      - name: customerOrderId
        in: path
        description: ID of the order for which to generate an invoice
        required: true
        schema:
          type: string
          example: "6544cd596955fe0a1c04fba9"
      - name: userId
        in: path
        description: The ID of the user
        required: true
        schema:
          type: string
          example: "6544cd596955fe0a1c04fba9"
    get:
      tags:
        - customer
      summary: Get an invoice in PDF format by orderId
      operationId: getInvoice
      security:
      - sessionId: []
      responses:
        '200':
          description: Invoice PDF
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /customer/booking/{userId}:
    parameters:
      - name: userId
        in: path
        schema: { type: string }
        required: true
    get:
      tags:
        - customer
      summary: Query bookings for customer
      operationId: queryBookingsForCustomer
      security:
      - sessionId: []
      parameters:
        - name: from
          in: header
          schema:
            type: string
            format: date-time
          required: false
        - name: to
          in: header
          schema:
            type: string
            format: date-time
          required: false
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Booking'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error

  /table:
    get:
      tags:
        - table
      summary: List tables
      description: Returns a single table
      operationId: listTables
      security:
        - sessionId: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Table'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /table/{tableNumber}:
    parameters:
      - name: tableNumber
        in: path
        description: number of table to return
        required: true
        schema:
          type: integer
          example: 10
    get:
      tags:
        - table
      summary: Finds table by number
      description: Returns a single table
      operationId: findTable
      security:
      - sessionId: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Table'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    patch:
      tags:
        - table
      summary: Create or update table by number
      operationId: patchTable
      security:
      - sessionId: []
      parameters:
        - name: capacity
          in: header
          schema: { type: integer }
          required: false
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Table'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      tags:
        - table
      summary: Deletes table by number
      operationId: deleteTable
      security:
      - sessionId: []
      responses:
        '204':
          description: Successfully deleted
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /table/order:
    get:
      tags:
        - table
      summary: Query table orders
      description: Place a new order in the store
      operationId: queryTableOrders
      security:
      - sessionId: []
      parameters:
        - name: tableNumber
          in: header
          schema: { type: integer }
          required: false
        - name: is-current
          in: header
          schema: { type: boolean }
          required: false
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TableOrder'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /table/order/{tableNumber}:
    parameters:
      - name: tableNumber
        in: path
        schema: { type: integer }
        required: true
    post:
      tags:
        - table
      summary: Place an order
      description: Place a new order in the store
      operationId: placeTableOrder
      security:
      - sessionId: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Order'
      responses:
        '201':
          description: Order placed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TableOrder'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /table/order/{tableOrderId}:
    parameters:
      - name: tableOrderId
        in: path
        description: ID of the order to update
        required: true
        schema:
          type: string
          example: "6544cd596955fe0a1c04fba9"
    patch:
      tags:
        - table
      summary: Update an order status or rating
      operationId: updateTableOrder
      security:
      - sessionId: []
      parameters:
        - name: rating
          in: header
          schema:
            type: integer
            format: int32
          required: false
        - name: status
          in: header
          schema:
            type: string
            enum:
              - placed
              - cooking
              - delivering
              - delivered
          required: false
      responses:
        '200':
          description: Order rated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error

  /booking:
    get:
      tags:
        - booking
      summary: Query bookings
      operationId: queryBookings
      security:
      - sessionId: []
      parameters:
        - name: tableNumber
          in: header
          schema: { type: integer }
          required: false
        - name: customer-name
          in: header
          schema: { type: string }
          required: false
        - name: from
          in: header
          schema:
            type: string
            format: date-time
          required: false
        - name: to
          in: header
          schema:
            type: string
            format: date-time
          required: false
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Booking'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      tags:
        - booking
      summary: Book table
      operationId: bookTable
      security:
      - sessionId: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewBooking'
        required: true
      responses:
        '201':
          description: Booking created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /booking/{bookingId}:
    parameters:
      - name: bookingId
        in: path
        schema: { type: string }
        required: true
    get:
      tags:
        - booking
      summary: Get booking
      operationId: getBooking
      security:
      - sessionId: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'

        '405':
            description: Invalid input
    patch:
      tags:
        - booking
      summary: Update booking status
      operationId: bookingStatusUpdate
      security:
      - sessionId: []
      parameters:
        - name: status
          in: header
          schema: 
            type: string
            enum:
              - pending
              - accepted
          required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /booking/table/avaible:
    get:
      tags:
        - booking
      summary: Query avaible tables
      operationId: queryTablesForBooking
      security:
      - sessionId: []
      parameters:
        - name: from
          in: header
          schema:
            type: string
            format: date-time
          required: true
        - name: to
          in: header
          schema:
            type: string
            format: date-time
          required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Table'             
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  
  /menu/drink:
    get:
      tags:
        - menu
      summary: Get all drink items
      operationId: getDrinkMenu
      responses:
        '200':
          description: List of drink items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Drink'
        '500':
          description: Internal server error
    post:
      tags:
        - menu
      summary: Add a new drink item
      operationId: addDrinkToMenu
      security:
      - sessionId: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Drink'
      responses:
        '201':
          description: Drink item added successfully
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /menu/drink/{drinkId}:
    parameters:
      - name: drinkId
        in: path
        description: ID of the menu item to retrieve/update/delete
        required: true
        schema:
          type: string
    get:
      tags:
        - menu
      summary: Get menu item details by ID
      operationId: getDrink
      responses:
        '200':
          description: Menu item details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Drink'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    patch:
      tags:
        - menu
      summary: Partially update menu item details by ID using query parameters
      operationId: updateDrink
      security:
      - sessionId: []
      parameters:
        - name: name
          in: query
          description: New name for the menu item
          schema:
            type: string
        - name: price
          in: query
          description: New price for the menu item
          schema:
            type: integer
      responses:
        '200':
          description: Menu item partially updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Drink'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      tags:
        - menu
      summary: Delete menu item by ID
      operationId: deleteDrink
      security:
      - sessionId: []
      responses:
        '204':
          description: Successfully deleted
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error

  /menu/food:
    get:
      tags:
        - menu
      summary: Get all food items
      operationId: getFoodMenu
      responses:
        '200':
          description: List of food items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Food'
        '500':
          description: Internal server error
    post:
      tags:
        - menu
      summary: Add a new food item
      operationId: addFoodToMenu
      security:
      - sessionId: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Food'
      responses:
        '201':
          description: Food item added successfully
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /menu/food/{foodId}:
    parameters:
      - name: foodId
        in: path
        description: ID of the menu item to retrieve/update/delete
        required: true
        schema:
          type: string
    get:
      tags:
        - menu
      summary: Get menu item details by ID
      operationId: getFood
      responses:
        '200':
          description: Menu item details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Food'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    patch:
      tags:
        - menu
      summary: Partially update menu item details by ID using query parameters
      operationId: updateFood
      security:
      - sessionId: []
      parameters:
        - name: name
          in: query
          description: New name for the menu item
          schema:
            type: string
        - name: price
          in: query
          description: New price for the menu item
          schema:
            type: integer
      responses:
        '200':
          description: Menu item partially updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Food'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      tags:
        - menu
      summary: Delete menu item by ID
      operationId: deleteFood
      security:
      - sessionId: []
      responses:
        '204':
          description: Successfully deleted
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error

  /stock/food:
    get:
      tags:
        - stock
      summary: Get all food stock items
      operationId: getAllFoodStockItems
      security:
      - sessionId: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FoodStockItem'    
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      tags:
        - stock
      summary: Create a new food stock item
      operationId: createFoodStockItem
      security:
      - sessionId: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FoodStockItem'
      responses:
        '201':
          description: Food stock item created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FoodStockItem'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /stock/food/{foodStockItemId}: 
    parameters:
      - name:  foodStockItemId
        in: path
        description: ID of the foodStockItem to retrieve/update/delete
        required: true
        schema:
          type: string
    patch:
      tags:
        - stock
      summary: Partially update a food stock item
      operationId: partiallyUpdateFoodStockItem
      security:
      - sessionId: []
      parameters:
        - in: query
          name: name
          schema:
            type: string
          description: Name of the food stock item to update
        - in: query
          name: quantity
          schema:
            type: integer
            format: int32
          description: New quantity of the food stock item
        - in: query
          name: unit
          schema:
            type: string
            enum:
              - kg
              - liter
              - g
              - dkg
              - dl
          description: New unit of the food stock item
      responses:
        '200':
          description: Food stock item partially updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FoodStockItem'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error    
    delete:
      tags:
        - stock
      summary: Delete a food stock item
      operationId: deleteFoodStockItem
      security:
      - sessionId: []
      responses:
        '204':
          description: Successfully deleted
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error

  /stock/drink:
    get:
      tags:
        - stock
      summary: Get all drink stock items
      security:
      - sessionId: []
      operationId: getAllDrinkStockItems
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DrinkStockItem'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      tags:
        - stock
      summary: Create a new drink stock item
      operationId: createDrinkStockItem
      security:
      - sessionId: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DrinkStockItem'
      responses:
        '201':
          description: Drink stock item created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DrinkStockItem'
        '400':
          description: Invalid input
  /stock/drink/{drinkStockItemId}:
    parameters:
      - name: drinkStockItemId
        in: path
        description: ID of the drinkStockItem to retrieve/update/delete
        required: true
        schema:
          type: string
    patch:
      tags:
        - stock
      summary: Partially update a drink stock item
      operationId: partiallyUpdateDrinkStockItem
      security:
      - sessionId: []
      parameters:
        - in: query
          name: name
          schema:
            type: string
          description: Name of the drink stock item to update
        - in: query
          name: quantity
          schema:
            type: integer
            format: int32
          description: New quantity of the drink stock item
      responses:
        '200':
          description: Drink stock item partially updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DrinkStockItem'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      tags:
        - stock
      summary: Delete a drink stock item
      operationId: deleteDrinkStockItem
      security:
      - sessionId: []
      responses:
        '204':
          description: Successfully deleted
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error

components:
  schemas:
    Table:
      required:
        - number
        - capacity
      type: object
      properties:
        number:
          type: integer
          format: int32
          example: 10
        capacity:
          type: integer
          format: int32
          example: 10
        status:
          type: string
          enum: [booked, free]
    Booking:
      required:
        - id
        - table
        - customer
        - startingDate
        - endingDate
        - status
        - peopleCount
      type: object
      properties:
        id:
          type: string
          example: "6544cd596955fe0a1c04fba9"
        table:
          $ref: '#/components/schemas/Table'
        customer:
          $ref: '#/components/schemas/User'
        startingDate:
          type: string
          format: date-time
        endingDate:
          type: string
          format: date-time
        status:
          type: string
          enum: [pending, accepted]
        peopleCount:
          type: integer
        note:
          type: string
          example: "az egyik fő egy kisbaba"
    NewBooking:
      required:
        - tableNumber
        - user-id
        - startingDate
        - endingDate
        - peopleCount
      type: object
      properties:
        tableNumber:
          type: integer
          example: 3
        user-id:
          type: string
          example: "6544cd596955fe0a1c04fba9"
        startingDate:
          type: string
          format: date-time
        endingDate:
          type: string
          format: date-time
        peopleCount:
          type: integer
        note:
          type: string
          example: "az egyik fő egy kisbaba"
    Food:
      required:
        - name
        - price
        - id
        - type
      type: object
      properties:
        id:
          type: string
          example: "6544cd596955fe0a1c04fba9"
        name:
          type: string
          example: Hamburger
        type:
          type: string
          enum:
            - main course
            - dessert
            - side dish
            - soup
        price:
          type: integer
          example: 400
        recipe:
          type: array
          items:
            type: object
            properties:
              ingerient:
                type: string
              unit:
                type: string
                enum:
                  - kg
                  - liter
                  - g
                  - dkg
                  - dl
                  - unit
              quantity:
                type: integer
    FoodOrderItem:
        required:
          - food
          - quantity
        type: object
        properties:
          food: 
            $ref: '#/components/schemas/Food'
          quantity:
            type: integer
            format: int32
            example: 1
    Drink:
      required:
        - name
        - price
        - id
        - type
      type: object
      properties:
        id:
          type: string
          example: "6544cd596955fe0a1c04fba9"
        name:
          type: string
          example: Cola
        type: 
          type: string
          enum:
            - soft drink
            - hot drink
            - alcoholic drink
        price:
          type: integer
          example: 400
    DrinkOrderItem:
        required:
          - drink
          - quantity
        type: object
        properties:
          drink: 
            $ref: '#/components/schemas/Drink'
          quantity:
            type: integer
            format: int32
            example: 1
    Order:
      required:
        - foods
        - drinks
      type: object
      properties:
        status:
          type: string
          enum: [placed, cooking, delivering, delivered]
        date:
          type: string
          format: date-time
        note:
          type: string
        rating:
          type: integer
          format: int32
          example: 5
        foods:
          type: array
          items:
            $ref: '#/components/schemas/FoodOrderItem'
        drinks:
          type: array
          items:
            $ref: '#/components/schemas/DrinkOrderItem'
    CustomerOrder:
      required:
        - id
        - customer
        - order
      type: object
      properties:
        id:
          type: string
          example: "6544cd596955fe0a1c04fba9"
        customer: 
          $ref: '#/components/schemas/User'
        order: 
          $ref: '#/components/schemas/Order'
    TableOrder:
      required:
        - id
        - table
        - order
      type: object
      properties:
        id:
          type: string
          example: "6544cd596955fe0a1c04fba9"
        table: 
          $ref: '#/components/schemas/Table'
        order: 
          $ref: '#/components/schemas/Order'
    FoodStockItem:
      required:
        - name
        - quantity
        - unit
      type: object
      properties:
        id:
          type: string
        name:
          type: string
          example: hús
        quantity:
          type: integer
          format: int32
          example: 1
        unit:
          type: string
          example: kg
          enum:
            - kg
            - liter
            - g
            - dkg
            - dl
            - unit
    DrinkStockItem:
      required:
        - name
        - quantity
      type: object
      properties:
        id: 
          type: string
        name:
          type: string
          example: coke
        quantity:
          type: integer
          format: int32
          example: 1
    UserRegister:
      required:
        - name
        - email
        - mobil
        - address
        - password
      type: object
      properties:
        name:
          type: string
          example: Gipsz Jakap
        email:
          type: string
          example: gipsz@jakab.com
        mobil:
          type: string
          example: +36709834234
        address:
          type: string
          example: Budapest Lakatos utca 6.
        password:
          type: string
          example: password
    UserLogin:
      required:
        - name
        - password
      type: object
      properties:
        name:
          type: string
          example: Nick User
        password:
          type: string
          example: password
    User:
      required:
        - name
        - email
        - mobil
        - address
      type: object
      properties:
        id:
          type: string
          example: "6544cd596955fe0a1c04fba9"
        name:
          type: string
          example: Gipsz Jakap
        email:
          type: string
          example: gipsz@jakab.com
        mobil:
          type: string
          example: +36709834234
        address:
          type: string
          example: Budapest Lakatos utca 6.
        points:
          type: integer
    UserSession:
      required:
        - id
        - user
        - role
      type: object
      properties:
        id:
          type: string
          example: "6544cd596955fe0a1c04fba9"
        user:
          $ref: '#/components/schemas/User'
        role:
          type: string
          example: "admin"
    MenuItem:
      type: object
      properties:
        name:
          type: string
        price:
          type: integer

  securitySchemes:
    sessionId:
      type: apiKey
      in: header
      name: sessionId